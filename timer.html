<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/tr/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="Jason Chavannes" />
    <title>jQuery Timer Demo</title>
    
   <!--  <link rel="stylesheet" href="res/style.css" /> -->
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="jquery.timer.js"></script>
    <!-- <script type="text/javascript" src="res/demo.js"></script> -->
    <script type="text/javascript">
function pad(number, length) {
    var str = '' + number;
    while (str.length < length) {str = '0' + str;}
    return str;
}
function formatTime(time) {
    // this function can be rewritten per the parameters desired to be achieved
    var min = parseInt(time / 6000),
        sec = parseInt(time / 100) - (min * 60),
        hundredths = pad(time - (sec * 100) - (min * 6000), 2);
    return (min > 0 ? pad(min, 2) : "00") + ":" + pad(sec, 2) + ":" + hundredths;
}

    // the structure below appears to be a module alike entity
    // it is hiding several functions from outside access / inspection
    // the function is wrapped in ( ) which means its self invoking, or that it is triggered immediately like most jQuery things
    // 
    // 
    var thurtyseconds = new ( function() {
        var $countdown,
            $form, // Form used to change the countdown time
            incrementTime = 70,
            currentTime = 3000,
            updateTimer = function() {
                $countdown.html(formatTime(currentTime)); // this function is purely for visual feedback
                if (currentTime == 0) {
                    thurtyseconds.Timer.stop();
                    timerComplete();
                    thurtyseconds.resetCountdown();
                    return;
                }
                // the below handles the business of counting down
                currentTime -= incrementTime / 10;
                if (currentTime < 0) currentTime = 0;
            },
            timerComplete = function() {
                alert('YOUR TURNS OVER! SCORE = ');
                // goof place for the remove flip logic
            },
            init = function() {
                $countdown = $('#countdown');
                thurtyseconds.Timer = $.timer(updateTimer, incrementTime, true);
                $form = $('#thurtyseconds');
                $form.bind('submit', function() {
                    thurtyseconds.resetCountdown();
                    return false;
                });
            };
        this.resetCountdown = function() {
            //var newTime = parseInt($form.find('input[type=text]').val()) * 100; // if changing manually
            var newTime = 3000;
            console.log(newTime);
            if (newTime > 0) {currentTime = newTime;}
            this.Timer.stop().once();
        };
    $(init); // doesn't appear to be an easy way to invoke this outside of the object
});
console.log(Object.keys(thurtyseconds));
    </script>
</head> 
<body>


    <h3>Example 2 - Countdown Timer</h3>
    <span id="countdown">00:30:00</span>
    <form id="thurtyseconds">
        <input type='button' value='Play/Pause' onclick='thurtyseconds.Timer.toggle();' />
        <input type='button' value='Stop/Reset' onclick='thurtyseconds.resetCountdown();' />
        <input type='text' name='startTime' value='300' style='width:30px;' />
    </form>

</body>
</html>