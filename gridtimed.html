<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/tr/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"> 
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="Jason Chavannes" />
    <link rel="stylesheet" href="css/themes/3000ms.css" />
    <link rel="stylesheet" href="css/themes/base.css" />
    <link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile.structure-1.4.2.min.css" />

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="jquery.timer.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script type="text/javascript">
        
        function pad(number, length) {
            var str = '' + number;
            while (str.length < length) {str = '0' + str;}
            return str;
        }
        function formatTime(time) {
            // this function can be rewritten per the parameters desired to be achieved
            var min = parseInt(time / 6000),
                sec = parseInt(time / 100) - (min * 60),
                hundredths = pad(time - (sec * 100) - (min * 6000), 2);
            return (min > 0 ? pad(min, 2) : "00") + ":" + pad(sec, 2) + ":" + hundredths;
        }

        function forEachIn(object, action) {
            for (var property in object) {
            if (Object.prototype.hasOwnProperty.call(object, property))
                action(property, object[property]);
            }
        }
        function forEach(array, action) {
            for (var i = 0; i < array.length; i++)
            action(array[i]);
        }
        function commence(){
            ThurtySeconds.Timer.toggle();
            $('span').css("visibility", "visible");
            return false;
        }
        function permitFlip(){ // ensure flip button disengaged until all questions answered

        }


        var ThurtySeconds = new function() { // I have here amended from self invoking, and called init() outside
            var $countdown,
                $form, // Form used to change the countdown time
                incrementTime = 70,
                currentTime = 3000,
                updateTimer = function() {
                    $countdown.html(formatTime(currentTime)); // this function is purely for visual feedback
                    if (currentTime == 0) {
                        ThurtySeconds.Timer.stop();
                        timerComplete();
                        ThurtySeconds.resetCountdown();
                        return;
                    }
                    // the below handles the business of counting down
                    currentTime -= incrementTime / 10;
                    if (currentTime < 0) currentTime = 0;
                },
                timerComplete = function() {
                    // .css(style="pointer-events:none;opacity:0.2") <-- not correct jQuery syntax, but the desired effect
                    alert('YOUR TURNS OVER! SCORE = ');
                    // goof place for the remove flip logic
                };
                this.init = function() {
                    console.log($countdown);
                    $countdown = $('#countdown');
                    console.log($countdown);
                    ThurtySeconds.Timer = $.timer(updateTimer, incrementTime, false);
                    $form = $('#ThurtySeconds');

                    $form.bind('submit', function() {
                        ThurtySeconds.resetCountdown();
                        return false;
                    });

                };
            this.resetCountdown = function() {

                var newTime = 3000; // 3000 = 30 seconds
                console.log(newTime);
                if (newTime > 0) {currentTime = newTime;}
                this.Timer.stop().once();
            };
        };

        $( document ).ready(function(){
        ThurtySeconds.init(); // initialise timer object

        var array = ["one","two","three","four","five"]; // need this to be an object I guess
            var JSON = [
                {'name':"one"},
                {'name':"two"},
                {'name':"three"},
                {'name':"four"},
                {'name':"five"}
                ];

            for(var x=0; x<JSON.length; x++){
                // prepend the vals of array of objects to html elements with an ID selector matching object keys
                var elm = $("#"+JSON[x].name);
                console.log(elm);
                elm.prepend("<span>"+JSON[x].name+"</span>");
            }
            // set the statements to invisible until the button is pressed
            $('.statement').css("visibility", "hidden"); // set to hidden until button
        });

        $(function() {
            // this function is always awaiting change!
            $('input').change(function(){
                console.log($(this).parentsUntil($('.statement')));
                console.log("an input click detected!");
                if($(this).context.name == "guessed"){
                    // uses name identifier of any input elements
                    $(this).parentsUntil( $('#statements') ).css( "display", "none" );
                    // traverses DOM tree until selector ID statements reached, all children of statements 'hidden' - via display none
                } else if ($(this).context.name == "skip") {
                    console.log("LOSER");
                    // uses name identifier of any input elements
                    $(this).parentsUntil( $('#statements') ).css( "background-color", "red" );
                    // sets bg to red, principally a debug measure
                }
            });
        });

    </script>
    <style type="text/css">
        .statement {
            height:20px;
            width:100%;
            display: inline-block;
            font-size: 20px;
            font-weight: bold;
            padding-right: 25px;
            text-shadow: 0px 1px 1px #fff;

        }
    </style>
</head>
<body>


    <h3>Countdown Timer</h3>
    <span id="countdown">00:30:00</span>
    <form id="ThurtySeconds">
        <input type='button' value='Play/Pause' onclick='ThurtySeconds.Timer.toggle();' /> <!-- init function creates the Timer object-->
        <input type='button' value='Stop/Reset' onclick='ThurtySeconds.resetCountdown();' />
        <!-- <input type='text' name='startTime' value='300' style='width:30px;' /> -->
    </form>
    <div id="test">
            <!-- <fieldset class="ui-grid-d"> -->
            <!-- Buttons to Let the Games Begin! -->
            <div class="ui-block-c">
                <button class="ui-btn" onclick="return commence()">Start Game</button>
            </div>
            <div class="ui-block-c">
                <button class="ui-btn" style="pointer-events:none;opacity:0.2" onclick="return flip()">Next Questions</button>
            <br>
            </div>
            <div class="ui-block-a"></div>
            <div class="ui-block-c">
                <button class="ui-btn" value='Stop/Reset' onclick='ThurtySeconds.resetCountdown();'>Reset</button>
            </div>
            <!-- entire body can be wrapped in fieldset-->
        Yo
        </div>
        <div id="statements">
            <fieldset class="ui-grid-a"></fieldset> 

                <div >
                <div id="one" class="statement"></div>
                    <div id = "one" class="ui-block-a"></div>
                    <div class="ui-block-b">
                <!--| alternative class designation = <input class="radio-input" |-->
                      <input  id="oneG" type="radio" name="guessed" required="required">
                      <label for="oneG">Guessed?</label>
                    </div>
                    <div class="ui-block-c">
                      <input id="oneS" type="radio" name="skip" required="required">
                      <label for="oneS">Skip?</label>
                    </div>
                </div>

                <div>
                    <div id="two" class="statement"></div>
                    <div id = "two" class="ui-block-a"></div>
                    <div class="ui-block-b">

                      <input class="guessed" id="twoG" type="radio" name="guessed" required="required">
                      <label class="ui-mobile" name="guessed" for="twoG">Guessed?</label>
                    </div>
                    <div class="ui-block-c">
                      <input class="skip" id="twoS" type="radio" name="skip" required="required">
                      <label class="skip" name="skip" for="twoS">Skip?</label>
                    </div>
                </div>

                <div>
                    <div id="three" class="statement"></div>
                        <div id = "three" class="ui-block-a"></div>
                        <div class="ui-block-b">

                          <input class="guessed" id="threeG" type="radio" name="guessed" required="required">
                          <label class="ui-mobile" name="guessed" for="threeG">Guessed?</label>
                        </div>
                        <div class="ui-block-c">
                          <input class="skip" id="threeS" type="radio" name="skip" required="required">
                          <label class="skip" name="skip" for="threeS">Skip?</label>
                        </div>
                </div>

                <div>
                    <div id="four" class="statement"></div>
                        <div id = "four" class="ui-block-a"></div>
                        <div class="ui-block-b">

                          <input class="guessed" id="fourG" type="radio" name="guessed" required="required">
                          <label class="ui-mobile" name="guessed" for="fourG">Guessed?</label>
                        </div>
                        <div class="ui-block-c">
                          <input class="skip" id="fourS" type="radio" name="skip" required="required">
                          <label class="skip" name="skip" for="fourS">Skip?</label>
                        </div>
                </div>

                <div>
                    <div id="five" class="statement"></div>
                    <div id = "five" class="ui-block-a"></div>
                    <div class="ui-block-b">

                      <input class="guessed" id="fiveG" type="radio" name="guessed" required="required">
                      <label class="guessed" name="guessed" for="fiveG">Guessed?</label>
                    </div>
                    <div class="ui-block-c">
                      <input class="skip" id="fiveS" type="radio" name="skip" required="required">
                      <label class="skip" name="skip" for="fiveS">Skip?</label>
                    </div>
                </div>
        <!-- </fieldset> -->
    </div>

</body>
</html>