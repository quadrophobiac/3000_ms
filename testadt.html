<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>

// potential alt implementation = http://ejohn.org/blog/javascript-array-remove/

function forEach(array, action) {
  for (var i = 0; i < array.length; i++)
    action(array[i]);
}
function forEachIn(object, action) {
	for (var property in object) {
	if (Object.prototype.hasOwnProperty.call(object, property))
		action(property, object[property]);
	}
}


var questions = {
	/*[0]topic: [statements[0]...statements[N]],*/
	0: [ 'sopranos','the wire','breaking bad', 'game of thrones', 'fargo','pokemon','match of the day','community','oz','penny dreadful'],
	1: ['blade runner', 'godfather','goodfellas', 'king kong', 'star wars', 'star trek', 'serenity', 'primer','blues brothers', 'taxi driver'],
	2: ['dublin', 'london', 'new york', 'brighton', 'glasgow', 'galway','cork','kildare','maynooth', 'goldsmiths'],
	3 : ['ronaldo','messi','suarez','pele','andy murray','roy mcelroy','barack obama','sepp blater','david cameron','tony blair'],
	4: ['glastonbury', 'world cup', 'wimbledon', 'election', 'wedding', 'holiday', 'baptism', 'christening','funeral', 'finale'],
	5: ['we3', 'gravitys rainbow', 'chaos', 'ubiq','sandman','invisibles','transmetropolitan','watchmen','lord of the rings','2666'],
	6: ['refrigerator', 'a.i.', 'neon', 'vinyl', 'tv', 'radio', 'telegraph', 'telephone', 'film', 'engine'],
	7: ['beef', 'noodles', 'pizza', 'rice', 'pasta', 'potatoes', 'chips', 'fries', 'tortilla', 'nachos'],
	8: ['youtube','gmail','internet','twitter','facebook','flickr','linkedin','tumblr','yahoo','pornhub'],
	9: ['range-rover', 'toyota','nissan','suzuki','volvo','volkswagen','mini','bmw','ford','mazda']
	/*[N]topic: [statements[0]...statements[N]] */
};

function chooseFive(topic, object) {

		var genObj = {};
		for (var c = 0; c < topic.length; c++){
			var l = (object[topic[c]].length)-1;
			genObj[topic[c]] = Math.floor((Math.random() * l));
		}
		return genObj;
};

//var allTopics = Object.keys(questions); //  = returns strings rather than numbers - but still functions as desired!!

function shuffle(array) {
  var tmp, current, top = array.length;
  if(top) while(--top) {
    current = Math.floor(Math.random() * (top + 1));
    tmp = array[current];
    array[current] = array[top];
    array[top] = tmp;
  }
  return array;
}

// round1 = [0,1,2,3,4];
// round2 = [5,6,7,8,9];

// this needs to happen for every iteration when choosing randomly
allTopics = shuffle(Object.keys(questions));
var round1 = allTopics.slice(0,5);
var round2 = allTopics.slice(5,10);


first = chooseFive(round2,questions);
remove(first, questions);
//pk=[];
flip = chooseFive(round1,questions); // in practice numArr will be different
console.log(first);
//forEach(flip[1], function(a){console.log("round2 element from topic array index = "+a);});
console.log(flip);

forEachIn(questions, function(k,v){console.log("FIRST: new length for "+k+" = "+v.length);});

// console.log(questions[round2[0]][0]); // works!
// console.log(questions[0][flip[1][0]]); // works
// console.log(questions[round2[0]][flip[1][0]]); // works!

// all below needs revision because it is now an object not an array of arrays

function presentStatements(nuArray,microObject, object) {
	forEachIn(microObject, function(k,v){
		nuArray.push(object[k][v]);
	});
	return(nuArray);
};

function remove(microObject, object) {
	forEachIn(microObject, function(k,v){
		object[k].splice(v, 1);
	});
};

var secondRound = presentStatements([],flip,questions);

forEach(secondRound, function(a){console.log("question:"+a);});

remove(flip, questions);

forEachIn(questions, function(k,v){console.log("flip triggered new length for "+k+" = "+v.length);});

console.log(questions);

// function remove(topics, object, indices){
// 	forEach(topics, function(a){
// 		//forEachIn(object, function(k,v){
// 			console.log("forEach fetched index = "+a);
// 			console.log("indices array indexed by above = "+indices[a]);
// 			// indices only ever ranges from 0-4, whereas random assignment means that a could be anywhere between 0-9
// 			//console.log(object[a][indices[a]]);

// 			//object[a].splice(e, 1); // how is E remembered??
// 		//});
// 	});
// };
// //remove(numArr,questions);
// console.log("testing remove function, first printing the elements in second round of questions");
// forEach(flip[0], function(a){console.log("statement = "+a)});
// remove(round1, questions, flip[1]);
// answer: arraySplice return methods If only one element is removed, an array of one element is returned

</script>
<body>
	<div id="First">
			Yo
		<button class="button" onclick="return commence()">First 5 questions</button>
		<br>
	</div>
	<div id="Flip">
			Yo
		<button class="button" onclick="return commence()">Flip for next 5 Questions</button>
		<br>
	</div>
</body>
</html>